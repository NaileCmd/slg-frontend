import{b as Q,c as W,d as g}from"./chunk-3ZCSCXLR.js";import"./chunk-B3R2HNO2.js";import{a as k,b as z,e as L,f as H,i as J,j as K}from"./chunk-A5Y6S3FO.js";import{b as R,d as p,f as T,g as D,j as O,k as V,l as j,m as B,n as G,p as A}from"./chunk-NCISI33M.js";import"./chunk-7MM4KBRY.js";import"./chunk-5IC5DNT2.js";import{$ as q,S,T as F,U as y,X as I,Y as P}from"./chunk-6BJC2WJD.js";import{a as N}from"./chunk-FFM2WDBO.js";import"./chunk-EVU5ULYQ.js";import{k as U}from"./chunk-KH54WQ6O.js";import{Ab as r,Bb as c,Fc as x,Ib as M,Ic as b,Sb as o,Xa as s,Ya as u,_b as E,ja as w,pb as f,rb as d,zb as a}from"./chunk-CU6XLLBJ.js";function Y(e,i){e&1&&(a(0,"mat-error"),o(1," Username is required "),r())}function Z(e,i){e&1&&(a(0,"mat-error"),o(1," Email is required "),r())}function $(e,i){e&1&&(a(0,"mat-error"),o(1," Invalid email format "),r())}function ee(e,i){e&1&&(a(0,"mat-error"),o(1," Password is required "),r())}function te(e,i){e&1&&(a(0,"mat-error"),o(1," Confirmation is required "),r())}function re(e,i){e&1&&(a(0,"mat-error"),o(1," Passwords must match "),r())}var ie=e=>{let i=e,X=i.get("password")?.value,n=i.get("confirmPassword")?.value;return X===n?null:{passwordMismatch:!0}},Ee=(()=>{let i=class i{constructor(n,l,t,m){this.fb=n,this.authService=l,this.router=t,this.dialog=m,this.createUserForm=this.fb.nonNullable.group({username:["",p.required],email:["",[p.required,p.email]],password:["",p.required],confirmPassword:["",[p.required]]},{validators:ie})}ngOnInit(){}onSubmit(){if(this.createUserForm.valid){let{username:n,email:l,password:t}=this.createUserForm.getRawValue();this.authService.registerUser(n,t).subscribe(m=>{m===200?(this.dialog.open(g,{data:{title:"Registrierung Erfolgreich",message:"Bitte \xFCberpr\xFCfe dein eMail-Postfach und best\xE4tige die Aktivierung. Nach erfolgter Best\xE4tigung wird der User sofort freigeschalten."}}),this.router.navigate(["/login"])):this.handleRegistrationError(m)},m=>{console.error("Registrierung fehlgeschlagen: ",m),this.dialog.open(g,{data:{title:"Registrierungsfehler",message:"Ein unerwarteter Fehler ist aufgetreten, bitte sp\xE4ter erneut versuchen."}})})}}handleRegistrationError(n){let l="Registration Error",t="Could not create user. Please try again.";n===400?t="Invalid input. Please check the form fields and try again.":n===409&&(t="User already exists. Please use a different username or email."),this.dialog.open(g,{data:{title:l,message:t}})}};i.\u0275fac=function(l){return new(l||i)(u(G),u(N),u(U),u(Q))},i.\u0275cmp=w({type:i,selectors:[["app-user-create"]],standalone:!0,features:[E],decls:35,vars:8,consts:[[1,"create-user-container"],[1,"card-title"],[3,"ngSubmit","formGroup"],[1,"form-group"],["appearance","fill",1,"form-field"],["matInput","","formControlName","username","required","","autocomplete","username"],[4,"ngIf"],["matInput","","formControlName","email","required","","autocomplete","email"],["matInput","","type","password","formControlName","password","required","","autocomplete","new-password"],["matInput","","type","password","formControlName","confirmPassword","required","","autocomplete","new-password"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(l,t){if(l&1&&(a(0,"div",0)(1,"mat-card")(2,"mat-card-title",1),o(3,"Create New User"),r(),a(4,"mat-card-content")(5,"form",2),M("ngSubmit",function(){return t.onSubmit()}),a(6,"div",3)(7,"mat-form-field",4)(8,"mat-label"),o(9,"Username"),r(),c(10,"input",5),f(11,Y,2,0,"mat-error",6),r()(),a(12,"div",3)(13,"mat-form-field",4)(14,"mat-label"),o(15,"Email"),r(),c(16,"input",7),f(17,Z,2,0,"mat-error",6)(18,$,2,0,"mat-error",6),r()(),a(19,"div",3)(20,"mat-form-field",4)(21,"mat-label"),o(22,"Password"),r(),c(23,"input",8),f(24,ee,2,0,"mat-error",6),r()(),a(25,"div",3)(26,"mat-form-field",4)(27,"mat-label"),o(28,"Confirm Password"),r(),c(29,"input",9),f(30,te,2,0,"mat-error",6)(31,re,2,0,"mat-error",6),r()(),a(32,"div",3)(33,"button",10),o(34," Create User "),r()()()()()()),l&2){let m,h,_,C,v;s(5),d("formGroup",t.createUserForm),s(6),d("ngIf",(m=t.createUserForm.get("username"))==null?null:m.hasError("required")),s(6),d("ngIf",(h=t.createUserForm.get("email"))==null?null:h.hasError("required")),s(),d("ngIf",(_=t.createUserForm.get("email"))==null?null:_.hasError("email")),s(6),d("ngIf",(C=t.createUserForm.get("password"))==null?null:C.hasError("required")),s(6),d("ngIf",(v=t.createUserForm.get("confirmPassword"))==null?null:v.hasError("required")),s(),d("ngIf",t.createUserForm.hasError("passwordMismatch")),s(2),d("disabled",t.createUserForm.invalid)}},dependencies:[b,x,H,L,k,z,K,J,q,P,I,S,y,F,A,O,R,T,D,B,V,j,W],styles:[".form-group[_ngcontent-%COMP%]{width:100%;margin-bottom:5px;display:flex;justify-content:center}.form-field[_ngcontent-%COMP%]{width:60%;min-width:100px;max-width:400px}.card-title[_ngcontent-%COMP%]{text-align:left;font-size:20px;margin-bottom:20px;margin-top:20px;margin-left:50px}button[_ngcontent-%COMP%]{font-size:20px;width:100%;max-width:300px}.login-container[_ngcontent-%COMP%]{padding-top:20px}"]});let e=i;return e})();export{Ee as UserCreateComponent,ie as passwordMatchValidator};
