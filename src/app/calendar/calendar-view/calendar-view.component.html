<mat-card class="calendar-view">
    <mat-card-header>
        <div mat-card-title class="header-container">
            <button mat-icon-button (click)="goToPreviousMonth()" class="header-button left-button">
                <mat-icon>arrow_back</mat-icon>
            </button>
            <span class="header-title">{{ currentMonth | date:'MMMM YYYY' }}</span>
            <button mat-icon-button (click)="goToNextMonth()" class="header-button right-button">
                <mat-icon>arrow_forward</mat-icon>
            </button>
        </div>
        <div mat-card-subtitle>
            <!-- Optional subtitle or additional information -->
        </div>
    </mat-card-header>
    <mat-card-content>
        <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
            <ng-container matColumnDef="mo">
                <th mat-header-cell *matHeaderCellDef> Mo </th>
                <td mat-cell *matCellDef="let element"
                    [ngClass]="{'today-border': isToday(getEvent(element.mo).dayNumber)}"
                    (click)="onCellClick(element.mo)">
                    <div *ngIf="getEvent(element.mo) as event">
                        <div class="upper-cell-content">{{getDayNumber(event.dayNumber)}}</div>
                        <div class="event-detail-container">
                            <div *ngFor="let eventDetail of event.eventSet" class="event-detail"
                                [ngClass]="getEventClass(eventDetail)">
                            </div>
                        </div>
                    </div>
                </td>
            </ng-container>

            <ng-container matColumnDef="tu">
                <th mat-header-cell *matHeaderCellDef> Di </th>
                <td mat-cell *matCellDef="let element"
                    [ngClass]="{'today-border': isToday(getEvent(element.tu).dayNumber)}"
                    (click)="onCellClick(element.tu)">
                    <div *ngIf="getEvent(element.tu) as event">
                        <div class="upper-cell-content">{{getDayNumber(event.dayNumber)}}</div>
                        <div class="event-detail-container">
                            <div *ngFor="let eventDetail of event.eventSet" class="event-detail"
                                [ngClass]="getEventClass(eventDetail)">
                            </div>
                        </div>
                    </div>
                </td>
            </ng-container>

            <ng-container matColumnDef="we">
                <th mat-header-cell *matHeaderCellDef> Mi </th>
                <td mat-cell *matCellDef="let element"
                    [ngClass]="{'today-border': isToday(getEvent(element.we).dayNumber)}"
                    (click)="onCellClick(element.we)">
                    <div *ngIf="getEvent(element.we) as event">
                        <div class="upper-cell-content">{{getDayNumber(event.dayNumber)}}</div>
                        <div class="event-detail-container">
                            <div *ngFor="let eventDetail of event.eventSet" class="event-detail"
                                [ngClass]="getEventClass(eventDetail)">
                            </div>
                        </div>
                    </div>
                </td>
            </ng-container>

            <ng-container matColumnDef="th">
                <th mat-header-cell *matHeaderCellDef> Do </th>
                <td mat-cell *matCellDef="let element"
                    [ngClass]="{'today-border': isToday(getEvent(element.th).dayNumber)}"
                    (click)="onCellClick(element.th)">
                    <div *ngIf="getEvent(element.th) as event">
                        <div class="upper-cell-content">{{getDayNumber(event.dayNumber)}}</div>
                        <div class="event-detail-container">
                            <div *ngFor="let eventDetail of event.eventSet" class="event-detail"
                                [ngClass]="getEventClass(eventDetail)">
                            </div>
                        </div>
                    </div>
                </td>
            </ng-container>

            <ng-container matColumnDef="fr">
                <th mat-header-cell *matHeaderCellDef> Fr </th>
                <td mat-cell *matCellDef="let element"
                    [ngClass]="{'today-border': isToday(getEvent(element.fr).dayNumber)}"
                    (click)="onCellClick(element.fr)">
                    <div *ngIf="getEvent(element.fr) as event">
                        <div class="upper-cell-content">{{getDayNumber(event.dayNumber)}}</div>
                        <div class="event-detail-container">
                            <div *ngFor="let eventDetail of event.eventSet" class="event-detail"
                                [ngClass]="getEventClass(eventDetail)">
                            </div>
                        </div>
                    </div>
                </td>
            </ng-container>

            <ng-container matColumnDef="sa">
                <th mat-header-cell *matHeaderCellDef class="we-column"> Sa </th>
                <td mat-cell *matCellDef="let element" class="we-column"
                    [ngClass]="{'today-border': isToday(getEvent(element.sa).dayNumber)}"
                    (click)="onCellClick(element.sa)">
                    <div *ngIf="getEvent(element.sa) as event">
                        <div class="upper-cell-content">{{getDayNumber(event.dayNumber)}}</div>
                        <div class="event-detail-container">
                            <div *ngFor="let eventDetail of event.eventSet" class="event-detail"
                                [ngClass]="getEventClass(eventDetail)">
                            </div>
                        </div>
                    </div>
                </td>
            </ng-container>

            <ng-container matColumnDef="su">
                <th mat-header-cell *matHeaderCellDef class="we-column"> So </th>
                <td mat-cell *matCellDef="let element" class="we-column"
                    [ngClass]="{'today-border': isToday(getEvent(element.su).dayNumber)}"
                    (click)="onCellClick(element.su)">
                    <div *ngIf="getEvent(element.su) as event">
                        <div class="upper-cell-content">{{getDayNumber(event.dayNumber)}}</div>
                        <div class="event-detail-container">
                            <div *ngFor="let eventDetail of event.eventSet" class="event-detail"
                                [ngClass]="getEventClass(eventDetail)">
                            </div>
                        </div>
                    </div>
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
    </mat-card-content>
</mat-card>

<div class="details-container">
    <app-calendar-details [selectedDay]="selectedDay"></app-calendar-details>
</div>